/* ============================================
   EVERY LAYOUT PRIMITIVES
   Composable layout primitives based on Every Layout
   ============================================ */

/* ============================================
   STACK - Vertical spacing
   ============================================ */
.stack {
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
}

.stack > * {
    margin-block: 0;
}

.stack > * + * {
    margin-block-start: var(--space, var(--space-base));
}

/* Stack variants with different spacing */
.stack--xs > * + * { --space: var(--space-xs); }
.stack--sm > * + * { --space: var(--space-sm); }
.stack--md > * + * { --space: var(--space-md); }
.stack--lg > * + * { --space: var(--space-lg); }
.stack--xl > * + * { --space: var(--space-xl); }
.stack--2xl > * + * { --space: var(--space-2xl); }

/* ============================================
   CLUSTER - Horizontal grouping with wrapping
   ============================================ */
.cluster {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space, var(--space-sm));
    align-items: center;
}

/* Cluster variants */
.cluster--xs { --space: var(--space-xs); }
.cluster--sm { --space: var(--space-sm); }
.cluster--md { --space: var(--space-md); }
.cluster--base { --space: var(--space-base); }
.cluster--lg { --space: var(--space-lg); }
.cluster--xl { --space: var(--space-xl); }

/* ============================================
   BOX - Card/panel container
   ============================================ */
.box {
    padding: var(--padding, var(--space-xl));
    border: var(--border-width) solid var(--color-border);
    border-radius: var(--radius-md);
    background: var(--color-bg-surface);
}

.box--sm { --padding: var(--space-sm); }
.box--md { --padding: var(--space-md); }
.box--base { --padding: var(--space-base); }
.box--lg { --padding: var(--space-lg); }
.box--xl { --padding: var(--space-xl); }
.box--2xl { --padding: var(--space-2xl); }

.box--no-padding { --padding: 0; }
.box--no-border { border: none; }
.box--no-bg { background: transparent; }

/* ============================================
   CENTER - Centering content
   ============================================ */
.center {
    box-sizing: content-box;
    max-inline-size: var(--max-width, 100%);
    margin-inline: auto;
    padding-inline: var(--padding-inline, var(--space-xl));
}

.center--narrow { --max-width: 60ch; }
.center--medium { --max-width: 80ch; }
.center--wide { --max-width: 120ch; }

/* ============================================
   SIDEBAR - Sidebar + main content layout
   ============================================ */
.sidebar-layout {
    display: flex;
    flex-wrap: wrap;
    gap: var(--sidebar-gap, 0);
    min-height: var(--min-height, 100vh);
}

.sidebar-layout > :first-child {
    flex-basis: var(--sidebar-width, var(--sidebar-width));
    flex-grow: 0;
    flex-shrink: 0;
}

.sidebar-layout > :last-child {
    flex-basis: 0;
    flex-grow: 999;
    min-inline-size: 50%;
}

/* Sidebar variants */
.sidebar-layout--no-wrap {
    flex-wrap: nowrap;
}

/* ============================================
   GRID - Responsive grid layout
   ============================================ */
.grid {
    display: grid;
    gap: var(--grid-gap, var(--space-base));
    grid-template-columns: var(--grid-cols, repeat(auto-fit, minmax(var(--grid-min, 250px), 1fr)));
}

.grid--auto-fill {
    grid-template-columns: repeat(auto-fill, minmax(var(--grid-min, 250px), 1fr));
}

.grid--auto-fit {
    grid-template-columns: repeat(auto-fit, minmax(var(--grid-min, 250px), 1fr));
}

.grid--cols-1 { grid-template-columns: 1fr; }
.grid--cols-2 { grid-template-columns: repeat(2, 1fr); }
.grid--cols-3 { grid-template-columns: repeat(3, 1fr); }
.grid--cols-4 { grid-template-columns: repeat(4, 1fr); }

/* Grid gap variants */
.grid--gap-xs { --grid-gap: var(--space-xs); }
.grid--gap-sm { --grid-gap: var(--space-sm); }
.grid--gap-md { --grid-gap: var(--space-md); }
.grid--gap-lg { --grid-gap: var(--space-lg); }
.grid--gap-xl { --grid-gap: var(--space-xl); }
.grid--gap-2xl { --grid-gap: var(--space-2xl); }

/* ============================================
   FRAME - Aspect ratio container
   ============================================ */
.frame {
    aspect-ratio: var(--aspect-ratio, 16 / 9);
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
}

.frame > img,
.frame > video,
.frame > svg {
    inline-size: 100%;
    block-size: 100%;
    object-fit: cover;
}

/* Frame aspect ratio variants */
.frame--square { --aspect-ratio: 1 / 1; }
.frame--portrait { --aspect-ratio: 3 / 4; }
.frame--landscape { --aspect-ratio: 4 / 3; }
.frame--widescreen { --aspect-ratio: 16 / 9; }
.frame--ultrawide { --aspect-ratio: 21 / 9; }

/* ============================================
   SWITCHER - Toggle between horizontal/vertical
   ============================================ */
.switcher {
    display: flex;
    flex-wrap: wrap;
    gap: var(--switcher-gap, var(--space-base));
}

.switcher > * {
    flex-grow: 1;
    flex-basis: calc((var(--switcher-threshold, 30rem) - 100%) * 999);
}

.switcher > :nth-last-child(n+2),
.switcher > :nth-last-child(n+2) ~ * {
    flex-basis: 100%;
}

/* Switcher threshold variants */
.switcher--sm { --switcher-threshold: 20rem; }
.switcher--md { --switcher-threshold: 30rem; }
.switcher--lg { --switcher-threshold: 40rem; }
.switcher--xl { --switcher-threshold: 50rem; }

